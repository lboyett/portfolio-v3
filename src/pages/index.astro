---
import Layout from "../layouts/Layout.astro";
import "./index.scss";
import luke from "../assets/luke.jpg";
import djangularScreenshot from "../assets/djangular.png";
import djangularLogo from "../assets/djangular.svg";
import exitmapScreenshot from "../assets/exitmap.webp";
---

<Layout
  ><div class="landing-page">
    <div class="navbar-fixed">
      <span class="material-symbols-outlined">menu</span>
      <ul>
        <li class="about-li">About</li>
        <li class="projects-li">Projects</li>
        <li class="contact-li">Contact <div class="circle"></div></li>
        <li class="resume-li">
          <a href="/resume.pdf" target="_blank">Resume</a>
        </li>
      </ul>
    </div>
    <div class="navbar">
      <div class="logo-container">
        <h1>Luke Boyett</h1>
        <div>DEVELOPER / DESIGNER</div>
      </div>
      <ul>
        <li class="about-li">About</li>
        <li class="projects-li">Projects</li>
        <li class="contact-li">Contact <div class="circle"></div></li>
        <li class="resume-li">
          <a href="/resume.pdf" target="_blank">Resume</a>
        </li>
      </ul>
    </div>
  </div>
  <div class="about-page">
    <div class="mobile-title">I'm Luke</div>
    <div class="img-container">
      <img src={luke.src} alt="" />
    </div>
    <div class="text-container">
      <div class="title">I'm Luke.</div>
      <p>
        I'm a 27 year old full stack web developer and designer from Birmingham,
        Alabama. I have experience developing with technologies such as React,
        Angular, Node, Django, and PostgreSQL.
      </p>
      <p>
        As primarily a developer, I'm beginnging to explore the design aspect of
        software development, and I aim to create non-intrustive, elegant
        designs that provide a gentle and smooth user experience.
      </p>
      <p>
        In the future, I would like to increase my proficiency as a back end
        developer, and I am interested in exploring data science technology and
        discovering ways to innovate the industry.
      </p>
      <div class="contact">
        Interested in working together? <span>Contact me</span>
      </div>
      <div>
        See my projects <span class="material-symbols-outlined"> south </span>
      </div>
    </div>
  </div>

  <div class="projects-page">
    <div class="djangular-container">
      <div class="text-container">
        <div class="logo-container">
          <img src={djangularLogo.src} alt="" />
          <div>
            <span class="material-symbols-outlined">error</span>
            <span>coming soon</span>
          </div>
        </div>
        <img src={djangularScreenshot.src} alt="" class="screenshot-mobile" />

        <p>A full stack web application up-and-running in just minutes.</p>
        <p>
          Combining the power of Django and Angular, Djangular is a full stack
          starter kit that provides the framework to rapidly produce complex web
          applications. Placing an emphasis on user-management, Djangular comes
          out of the box with a complete user management system including
          authentication, password reset, email verification, user avatars, and
          reCAPTCHA, and more.
        </p>
        <p>
          Djangular is expected to be released by 2025 as an NPM package that
          can be installed in less than 5 minutes.
        </p>
      </div>
      <div class="img-container">
        <img src={djangularScreenshot.src} alt="" />
      </div>
    </div>
    <div class="separator"></div>
    <div class="exitmap-container">
      <div class="img-container">
        <img src={exitmapScreenshot.src} alt="" />
      </div>
      <div class="text-container">
        <div class="logo-container">
          <div><span>ExitMap</span></div>
        </div>
        <img src={exitmapScreenshot.src} alt="" class="screenshot-mobile" />
        <p>An interactive map of BASE jumps around the world.</p>
        <p>
          Find your next BASE jump with ExitMap, the easy-to-use interactive map
          and database of numerous BASE jumps throughout the world. Know a BASE
          jump that isn't on the map yet? Easily add it to the database by
          sumbitting it with our custom form and map designed to make adding a
          new jump as easy as filling out the form and locating the jump on a
          map.
        </p>
        <p>
          ExitMap is a full stack web application built on React and Node +
          Express.
        </p>
      </div>
    </div>
  </div>
  <div class="contact-page">
    <div class="grow"></div>
    <div class="thanks">Thanks for the message!</div>
    <h2>Send me a message</h2>
    <form action="">
      <input
        type="hidden"
        name="access_key"
        value="f4205424-50b4-4b5c-8459-71f768ddeb89"
      />
      <div class="form-field">
        <input type="text" name="name" placeholder="Name" required />
      </div>
      <div class="form-field">
        <input type="email" name="email" placeholder="Email" required />
      </div>
      <div class="form-field">
        <textarea name="message" placeholder="Message" required></textarea>
      </div>
      <button type="submit">Submit</button>
      <div class="loader"></div>
      <div class="error">
        <span class="material-symbols-outlined">error </span>Error submitting
        message. Please try again.
      </div>
    </form>
    <div class="grow"></div>
    <div class="footer">
      <div>Â© Copyright 2024 Luke Boyett</div>
      <div>lboyett@gmail.com</div>
    </div>
  </div>
</Layout>

<script>
  async function handleFormSubmit() {
    const form = document.querySelector("form");
    if (!form) return;

    form.addEventListener("submit", async (event) => {
      event.preventDefault();
      const submitButton = document.querySelector(
        "button[type='submit']",
      ) as HTMLButtonElement;

      const formData = new FormData(form);
      type Web3FormsResponse = Response & {
        ok: boolean;
        status: number;
      };
      submitButton.disabled = true;
      const response = await fetch("https://api.web3forms.com/submit", {
        method: "POST",
        body: formData,
      });
      if (response.ok === true) {
        const thanks = document.querySelector(".thanks") as HTMLDivElement;
        const h2 = document.querySelector(
          ".contact-page h2",
        ) as HTMLHeadingElement;
        if (thanks) thanks.classList.add("submitted");
        if (h2) h2.classList.add("submitted");
        form.classList.add("submitted");
      } else {
        submitButton.disabled = false;
        const error = document.querySelector(".error") as HTMLDivElement;
        if (error) error.classList.add("submit-fail");
      }
    });
  }

  function addEventListeners() {
    const aboutLis = document.querySelectorAll(".about-li");
    const aboutPage = document.querySelector(".about-page");
    aboutLis?.forEach((li) => {
      li.addEventListener("click", () => {
        aboutPage?.scrollIntoView({ behavior: "smooth" });
      });
    });

    const projectsLis = document.querySelectorAll(".projects-li");
    const projectsPage = document.querySelector(".projects-page");
    projectsLis?.forEach((li) => {
      li.addEventListener("click", () => {
        projectsPage?.scrollIntoView({ behavior: "smooth" });
      });
    });

    const contactLis = document.querySelectorAll(".contact-li");
    const contactPage = document.querySelector(".contact-page");
    contactLis?.forEach((li) => {
      li.addEventListener("click", () => {
        contactPage?.scrollIntoView({ behavior: "smooth" });
      });
    });

    const error = document.querySelector(".error");
    const inputs = document.querySelectorAll("input");
    inputs?.forEach((input) => {
      input.addEventListener("change", () => {
        error?.classList.remove("submit-fail");
      });
    });
    const textarea = document.querySelector("textarea");
    textarea?.addEventListener("change", () => {
      error?.classList.remove("submit-fail");
    });
  }

  function makeNavbarSticky() {
    const navbarFixed = document.querySelector(".navbar-fixed");
    const ul = document.querySelector(".navbar ul") as HTMLElement;
    const ulPosition = ul?.offsetTop + ul?.offsetHeight;
    window.addEventListener("scroll", () => {
      if (window.scrollY >= ulPosition) {
        navbarFixed?.classList.add("sticky");
      } else {
        navbarFixed?.classList.remove("sticky");
      }
    });
  }

  handleFormSubmit();
  addEventListeners();
  makeNavbarSticky();
</script>
